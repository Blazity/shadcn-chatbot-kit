---
title: MessageInput
description: A textarea component with file attachment support, auto-resizing, and drag-and-drop capabilities.
component: true
---

<ComponentPreview
  name="message-input-demo"
  title="MessageInput"
  description="A message input with file attachments support."
/>

The MessageInput component provides a rich textarea experience with support for file attachments, auto-resizing, and drag-and-drop file uploads.

## Features

- Auto-resizing textarea
- File attachments support
- Drag and drop file uploads
- Submit on Enter (configurable)
- Stop generation button
- Fully customizable styling

## Installation

<Tabs defaultValue="cli">

<TabsList>
  <TabsTrigger value="cli">CLI</TabsTrigger>
  <TabsTrigger value="manual">Manual</TabsTrigger>
</TabsList>

<TabsContent value="cli">

```bash
npx shadcn@latest add message-input
```

</TabsContent>

<TabsContent value="manual">

<Steps>

<Step>Copy and paste the following code into your project.</Step>

<ComponentSource name="message-input" />

<Step>Update the import paths to match your project setup.</Step>

</Steps>

</TabsContent>

</Tabs>

## Usage

### Basic Usage

```tsx
import { MessageInput } from "@/components/ui/message-input"

export function BasicMessageInput() {
  return (
    <MessageInput
      value={input}
      onChange={handleInputChange}
      isGenerating={false}
    />
  )
}
```

### With File Attachments

```tsx
import { MessageInput } from "@/components/ui/message-input"

export function MessageInputWithAttachments() {
  const [files, setFiles] = useState<File[] | null>(null)

  return (
    <MessageInput
      value={input}
      onChange={handleInputChange}
      isGenerating={false}
      allowAttachments
      files={files}
      setFiles={setFiles}
    />
  )
}
```

### With Stop Generation

```tsx
import { MessageInput } from "@/components/ui/message-input"

export function MessageInputWithStop() {
  return (
    <MessageInput
      value={input}
      onChange={handleInputChange}
      isGenerating={true}
      stop={() => {
        // Handle stop generation
      }}
    />
  )
}
```

## Props

The MessageInput component accepts two sets of props depending on whether file attachments are enabled.

### Base Props

| Prop            | Type         | Description                    | Default     |
| --------------- | ------------ | ------------------------------ | ----------- |
| `value`         | `string`     | Current input value            | Required    |
| `submitOnEnter` | `boolean`    | Whether to submit on Enter key | `true`      |
| `stop`          | `() => void` | Function to stop generation    | -           |
| `isGenerating`  | `boolean`    | Whether AI is generating       | Required    |
| `placeholder`   | `string`     | Input placeholder text         | "Ask AI..." |

### With Attachments Props

When `allowAttachments` is `true`, these additional props are required:

| Prop               | Type                                                   | Description              |
| ------------------ | ------------------------------------------------------ | ------------------------ |
| `allowAttachments` | `true`                                                 | Enable file attachments  |
| `files`            | `File[] \| null`                                       | Currently attached files |
| `setFiles`         | `React.Dispatch<React.SetStateAction<File[] \| null>>` | Files state setter       |

The component also accepts all standard textarea HTML attributes.

## Features

### Auto-resizing

The textarea automatically resizes based on content up to a maximum height of 240px.

```tsx
<MessageInput value={input} onChange={handleInputChange} isGenerating={false} />
```

### File Attachments

Enable file attachments with drag-and-drop support:

```tsx
<MessageInput
  value={input}
  onChange={handleInputChange}
  isGenerating={false}
  allowAttachments
  files={files}
  setFiles={setFiles}
/>
```

### Submit Behavior

Control whether Enter key submits the form:

```tsx
<MessageInput
  value={input}
  onChange={handleInputChange}
  isGenerating={false}
  submitOnEnter={false} // Disable submit on Enter
/>
```

### Generation Control

Show stop button during generation:

```tsx
<MessageInput
  value={input}
  onChange={handleInputChange}
  isGenerating={true}
  stop={() => {
    // Handle stop
  }}
/>
```

## Examples

### In a Chat Form

```tsx
<form onSubmit={handleSubmit}>
  <MessageInput
    value={input}
    onChange={handleInputChange}
    isGenerating={isLoading}
    stop={stop}
    allowAttachments
    files={files}
    setFiles={setFiles}
  />
</form>
```

### Custom Styling

```tsx
<MessageInput
  className="min-h-[100px] bg-secondary"
  value={input}
  onChange={handleInputChange}
  isGenerating={false}
/>
```

## Accessibility

- Proper ARIA labels for buttons and inputs
- Keyboard navigation support
- Screen reader friendly file upload interface
- Visual feedback for drag and drop operations

## Design Considerations

1. The component uses Framer Motion for smooth animations
2. File attachments are displayed as removable chips
3. The textarea auto-resizes for better user experience
4. Visual feedback is provided during drag and drop operations
5. The submit button is disabled when input is empty

## Customization

The MessageInput component can be customized through:

- CSS classes using the `className` prop
- Custom placeholder text
- Maximum height adjustment
- Submit behavior configuration
- Theming through CSS variables
